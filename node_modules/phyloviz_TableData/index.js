
function table_Data(objectDataset, callback){
	var toExport = {};
	var data = [];
	var dataset = objectDataset.dataset;
	var analysis_method = objectDataset.analysis_method;
	var delimiter = objectDataset.delimiter;
	//var headers = [];
	//var first = true;
	for (i in dataset[objectDataset.parameter]){
		
		var current = dataset[objectDataset.parameter][i];
		var toPush = [];

		//if (first){
		//	for (i in current) headers.push(i);
		//	first = false;
		//}
		count = 0;
		for (i in objectDataset.headers){

			if(analysis_method == 'pres-abs' && objectDataset.parameter != 'isolates'){
				if(count == 0);
				else if(current[objectDataset.headers[i]] == delimiter) current[objectDataset.headers[i]] = '0';
				else current[objectDataset.headers[i]] = '1';
				toPush.push(String(current[objectDataset.headers[i]]));
			}
			else toPush.push(String(current[objectDataset.headers[i]]));
			count+=1;
		}
		data.push(toPush);
	}
	callback({data: data, headers: objectDataset.headers.toString().replace(/&39/g, "'").split(',')});
}

module.exports = function(data, callback){

	table_Data(data, function(tableData){
		callback(tableData);
	})
}